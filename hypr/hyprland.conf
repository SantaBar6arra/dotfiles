########################################################################################
# MONITORS
########################################################################################

# This section is mandatory. 'preferred' picks the best resolution/refresh rate.
monitor=,preferred,auto,1

########################################################################################
# AUTOSTART / EXEC-ONCE (i3's 'exec')
########################################################################################

# Hyprland's equivalent of 'exec --no-startup-id'
# These commands will only run once on startup.

# CRITICAL: 'xss-lock' and 'i3lock' are X11.
# The Wayland replacement is 'hypridle' (to detect idle) and 'hyprlock' (to lock).
# You must install 'hypridle' and 'hyprlock'.
exec-once = hypridle & waybar & hyprpaper & swaync
exec-once = wl-paste --watch cliphist store

$terminal = kitty

########################################################################################
# INPUT (Keyboard, Mouse)
########################################################################################

input {
    # Replaces 'setxkbmap'
    kb_layout = us,ua,ru
    kb_variant =
    kb_model =
    kb_options = grp:win_space_toggle
    kb_rules =

    follow_mouse = 1
    touchpad {
        natural_scroll = yes
    }
    sensitivity = 0 # -1.0 - 1.0, 0 means no acceleration.
}

# Set $mod1 to Super (Windows) key
$mainMod = SUPER

# Replaces 'floating_modifier $mod1' and 'tiling_drag'
# $mainMod + Left Mouse button to move
bindm = $mainMod, mouse:272, movewindow
# $mainMod + Right Mouse button to resize
bindm = $mainMod, mouse:273, resizewindow

# gestures {
#     workspace_swipe = off
# }

# Colors
$color_active = rgb(fcba03)
$color_inactive = rgb(594d00)
$color_locked_active = rgb(e88300)

########################################################################################
# GENERAL & LAYOUT
########################################################################################

general {
    gaps_in = 5
    gaps_out = 5
    border_size = 2

    col.active_border = $color_active
    col.inactive_border = $color_inactive

    # i3 is manual tiling, Hyprland is dynamic.
    # 'dwindle' is the default spiral layout.
    # 'master' is closer to i3's default.
    layout = dwindle
}

dwindle {
    preserve_split = true
}

group {
    col.border_active = $color_active
    col.border_inactive = $color_inactive
    col.border_locked_active = $color_locked_active

    groupbar {
        enabled = true
        font_family = 0xProto Nerd Font
        height = 20
        font_size = 14
        scrolling = true

        col.active = $color_active
        col.inactive = $color_inactive
        col.locked_active = $color_locked_active
    }
}

decoration {
    rounding = 2
    
    blur {
        enabled = yes
        size = 3
        passes = 1
    }
}

animations {
    enabled = yes
    bezier = myBezier, 0.05, 0.9, 0.1, 1.05
    animation = windows, 1, 7, myBezier
    animation = windowsOut, 1, 7, default, popin
    animation = border, 1, 10, default
    animation = fade, 1, 7, default
    animation = workspaces, 1, 6, default
}

########################################################################################
# KEYBINDINGS
########################################################################################

# Start a terminal
bind = $mainMod, RETURN, exec, $terminal

# Kill focused window
bind = $mainMod SHIFT, Q, killactive,

bind = $mainMod, D, exec, rofi -show drun

# Change focus (using your i3 keymap: j=left, k=down, l=up, ;=right)
bind = $mainMod, J, movefocus, l
bind = $mainMod, K, movefocus, d
bind = $mainMod, L, movefocus, u
bind = $mainMod, SEMICOLON, movefocus, r

# Arrow keys
bind = $mainMod, left, movefocus, l
bind = $mainMod, down, movefocus, d
bind = $mainMod, up, movefocus, u
bind = $mainMod, right, movefocus, r

# Move focused window
bind = $mainMod SHIFT, J, movewindow, l
bind = $mainMod SHIFT, K, movewindow, d
bind = $mainMod SHIFT, L, movewindow, u
bind = $mainMod SHIFT, SEMICOLON, movewindow, r

# Arrow keys
bind = $mainMod SHIFT, left, movewindow, l
bind = $mainMod SHIFT, down, movewindow, d
bind = $mainMod SHIFT, up, movewindow, u
bind = $mainMod SHIFT, right, movewindow, r

# Enter fullscreen mode
bind = $mainMod, F, fullscreen,

# Toggle tiling / floating
bind = $mainMod SHIFT, SPACE, togglefloating,

# Scratchpad (Hyprland calls this 'special workspace')
bind = $mainMod SHIFT, MINUS, movetoworkspace, special
bind = $mainMod, MINUS, togglespecialworkspace,

# Switch to workspace
bind = $mainMod, 1, workspace, 1
bind = $mainMod, 2, workspace, 2
bind = $mainMod, 3, workspace, 3
bind = $mainMod, 4, workspace, 4
bind = $mainMod, 5, workspace, 5
bind = $mainMod, 6, workspace, 6
bind = $mainMod, 7, workspace, 7
bind = $mainMod, 8, workspace, 8
bind = $mainMod, 9, workspace, 9
bind = $mainMod, 0, workspace, 10

# Move focused container to workspace
bind = $mainMod SHIFT, 1, movetoworkspacesilent, 1
bind = $mainMod SHIFT, 2, movetoworkspacesilent, 2
bind = $mainMod SHIFT, 3, movetoworkspacesilent, 3
bind = $mainMod SHIFT, 4, movetoworkspacesilent, 4
bind = $mainMod SHIFT, 5, movetoworkspacesilent, 5
bind = $mainMod SHIFT, 6, movetoworkspacesilent, 6
bind = $mainMod SHIFT, 7, movetoworkspacesilent, 7
bind = $mainMod SHIFT, 8, movetoworkspacesilent, 8
bind = $mainMod SHIFT, 9, movetoworkspacesilent, 9
bind = $mainMod SHIFT, 0, movetoworkspacesilent, 10

# Group setup
bind = $mainMod, W, togglegroup,
bind = $mainMod CTRL, left, changegroupactive, b
bind = $mainMod CTRL, right, changegroupactive, f
bind = ALT SHIFT, left, movegroupwindow, b
bind = ALT SHIFT, right, movegroupwindow, f
bind = $mainMod, I, lockactivegroup, toggle
bind = $mainMod ALT, U, moveoutofgroup,
bind = $mainMod ALT, left, moveintogroup, l
bind = $mainMod ALT, right, moveintogroup, r
bind = $mainMod ALT, up, moveintogroup, u  
bind = $mainMod ALT, down, moveintogroup, d

bind = SUPER, H, layoutmsg, preselect b
bind = SUPER, V, layoutmsg, preselect r

# Reload the configuration file
bind = $mainMod SHIFT, C, exec, hyprctl reload

# Exit Hyprland
bind = $mainMod SHIFT, E, exit,

# Resize mode (submap)
bind = $mainMod, R, submap, resize

submap = resize
    # Your i3 keys
    binde = , J, resizeactive, -10 0
    binde = , K, resizeactive, 0 10
    binde = , L, resizeactive, 0 -10
    binde = , SEMICOLON, resizeactive, 10 0

    # Arrow keys
    binde = , left, resizeactive, -10 0
    binde = , down, resizeactive, 0 10
    binde = , up, resizeactive, 0 -10
    binde = , right, resizeactive, 10 0

    # Exit submap
    bind = , RETURN, submap, reset
    bind = , ESCAPE, submap, reset
submap = reset


# --- i3 Customizations ---

# Volume keys (pactl works fine)
bind = , XF86AudioRaiseVolume, exec, pactl set-sink-volume @DEFAULT_SINK@ +10%
bind = , XF86AudioLowerVolume, exec, pactl set-sink-volume @DEFAULT_SINK@ -10%
bind = , XF86AudioMute, exec, pactl set-sink-mute @DEFAULT_SINK@ toggle
bind = , XF86AudioMicMute, exec, pactl set-source-mute @DEFAULT_SOURCE@ toggle

# Alt+Tab
bind = ALT, TAB, cyclenext,
bind = ALT SHIFT, TAB, cyclenext, prev

bind = , Print, exec, grim -g "$(slurp)"
bind = $mainMod, P, exec, grim -g "$(slurp)"

# Power Menu
bind = CTRL ALT, DELETE, exec, rofi -show power-menu -modi 'power-menu:rofi-power-menu --no-symbols --choices=lockscreen/suspend/logout/shutdown/reboot' -theme-str 'window {width: 10em;} listview {lines: 5;}'

# Clipboard manager
bind = $mainMod, C, exec, cliphist list | rofi -dmenu -p "Clipboard" | cliphist decode | wl-copy

# Rofi launchers
bind = $mainMod, X, exec, rofi -show run
bind = $mainMod, Z, exec, rofi -show window

# File manager
bind = $mainMod, T, exec, pcmanfm

misc {
    disable_hyprland_logo = true
    force_default_wallpaper = 0
    disable_splash_rendering = true
}
